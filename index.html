<!DOCTYPE html>
<meta charset="utf-8">
<style>
 
body {
  font-family: "Ubuntu", Helvetica, Arial, sans-serif;
  margin: auto;
  position: relative;
  width: 960px;
}
 
label {
  display: block;
}
 
form {
  position: absolute;
  left: 20px;
  top: 20px;
}

a:link {
  text-decoration:underline;
}

#download{
    cursor: pointer;
    text-decoration: none;
    color: black;
}

#control {
  position: relative;
  width: 960px;
}

#vector {
  position: relative;
  width: 960px;
}



</style>
<form>
  <!--
    <label><input type="radio" name="mode" value="atc" checked> accelerate-then-coast</label>
    <label><input type="radio" name="mode" value="cubic"> cubic-in-out</label>
    <label><input type="radio" name="mode" value="linear"> linear</label>
  -->
<div id="control">  
  <textarea id="textarea">
EVYCQX
EVBXXN
EV9W3J
  </textarea> </br>
  <button type="button" onclick="textChanged();">Create SVG</button>  
  <p><a href="#" id="download">Download SVG</a></p>  
</div>
<div id="vector"></div>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
 

 

 
var width = "500mm",
    height = "500mm",
    viewBox = "0 0 500 500",
    fontSize = "4";
    
var rows = 10,
    cols = 5,
    dx = 38,
    dy = 38;
    
    
 
 
var svg = d3.select("#vector").append("svg:svg")
    .attr("width", width)
    .attr("height", height)
    .attr("viewBox", viewBox)
    .attr("preserveAspectRatio", "none");

//    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");
 
// textChanged();

d3.select("#download")
    .on("mouseover", writeDownloadLink);

 

function textChanged() {
   var textLines =  document.getElementById('textarea').value.split('\n') ;
   var maxCnt = textLines.length;
   var x;
   var y;
   
   for(var i = 0;i < maxCnt;i++){
     y = Math.floor( i / cols ) * dy ;
     x = ( i % cols ) * dx ;

     var text = svg.append("text")
       .attr("x", x)
       .attr("y", y)
       .attr("font-size",fontSize)
       .attr("font-family","Arial")
//       .attr("text-anchor","middle")
       .attr("font-weight","normal")
       .attr("fill","#ff0000")    
       .text(textLines[i]);  
       
   }   
}  

function writeDownloadLink(){
    var html = d3.select("svg")
        .attr("title", "svg_title")
        .attr("version", 1.1)
        .attr("xmlns", "http://www.w3.org/2000/svg")
        .node().parentNode.innerHTML;
    
    d3.select(this)
        .attr("href-lang", "image/svg+xml")
        .attr("href", "data:image/svg+xml;base64,\n" + btoa(html))
        .on("mousedown", function(){
            if(event.button != 2){
                d3.select(this)
                    .attr("href", null)
                    .html("Use right click");
            }
        })
        .on("mouseout", function(){
            d3.select(this)
                .html("Download");
        });
}; 
 
</script>